var Template;(function(){"use strict";var e,t,n,r,i,s,o,u,a,f,l,c,h,p;e={};a=function(d,v,m,g){t=d;n=t.document;r=f(n.location.href);i=v;s=m;o=new RegExp("(?:^|s)"+s+"(?!S)");u=g;c(r.url,n.querySelector("*[data-tpl-selector]")||n.documentElement);t.addEventListener("popstate",function(e){var t;if(r.qualifiedHref!==n.location.href){t=r;r=e.state;h(t)}},false);n.addEventListener("click",function(t){var u,a,c,d;if(t.target.nodeName==="A"){u=t.target;a=f(u.href);if(a.hostname===r.hostname){if(a.qualifiedHref!==r.qualifiedHref){c=r;r=a;r.title=u.textContent+i;d=n.getElementsByClassName(s)[0];d.className=d.className.replace(o,"");u.className+=s;if(r.url!==c.url){if(!e.hasOwnProperty(r.url)){l(c)}else{p();h(c)}}else{history.pushState(r,n.title,r.qualifiedHref)}}t.preventDefault();t.returnValue=false;return false}}},false)};f=function(t){var r,i,s,o,u;r=n.createElement("span");r.innerHTML='<a href="'+t.split('&').join('&amp;').split('"').join('&quot;').split('<').join('&lt;')+'"> </a>';i=r.firstChild.href;s=i.split("//")[1].split("/")[0].split(":")[0];o=i.split("#")[0];u=i.substring(o.length);return{href:t,qualifiedHref:i,hostname:s,url:o,hash:u}};l=function(i){var s,o;s=r.url;o=new XMLHttpRequest;o.open("GET",s,true);o.setRequestHeader("VIEW_MODE","AJAX");o.onreadystatechange=function(){var t,r;if(o.readyState===4){if(o.status===200){t=n.implementation.createDocument("http://www.w3.org/1999/xhtml","tpl",null).firstChild;t.innerHTML=o.responseText;e[s]=t;r=t.firstChild;c(s,r);h(i)}}};o.send(null)};c=function(r,i){var s,o,u;if(!e.hasOwnProperty(r)){s=n.implementation.createDocument("http://www.w3.org/1999/xhtml","tpl",null).firstChild;e[r]=s}else{s=e[r]}o=i.getAttribute("data-tpl-selector");s.selector=o!==""&&o!==null?decodeURI(o):"html";i.removeAttribute("data-tpl-selector");u=parseInt(i.getAttribute("data-tpl-expire"),10);if(!isNaN(u)){s.time=(new Date).getTime()+u}};h=function(i){var s,o,a,f,c,h,p,d;s=r.url;o=r.hash;a=i.url;f=e[s];c=f.firstChild;if(!f.hasOwnProperty("time")||(new Date).getTime()<f.time){h=n.querySelector(f.selector);p=h.parentNode;d=h.nextSibling;e[a].appendChild(h);if(d){p.insertBefore(c,d)}else{p.appendChild(c)}if(c.nodeName!=="HTML"){n.title=r.title}history.pushState(r,n.title,r.qualifiedHref);if(u){u(r)}}else{l(i)}};p=function(){var n,i,s;n=e[r.url].querySelectorAll('form:not([data-tpl-noreset="true"])');s=n.length;for(i=0;i<s;i+=1){n[i].reset()}};self.Template=a})()